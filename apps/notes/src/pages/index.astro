---
import Note from "@/components/note/Note.astro";
import SocialList from "@/components/SocialList.astro";
import PageLayout from "@/layouts/Base.astro";
import { collectionDateSort } from "@/utils/date";
import { getCollection } from "astro:content";

const MAX_NOTES = 10;
const allNotes = await getCollection("note");
const latestNotes = allNotes.sort(collectionDateSort).slice(0, MAX_NOTES);

const meta = {
	description: "Read my collection of notes",
	title: "Notes",
};
---

<PageLayout meta={meta}>
	<section class="px-4">
		<div class="mb-12">
			<SocialList />
		</div>
		<ul class="mt-6 space-y-8 text-start">
			{
				latestNotes.map((note) => (
					<li class="">
						<Note note={note} as="h2" isPreview />
					</li>
				))
			}
		</ul>
	</section>
</PageLayout>
