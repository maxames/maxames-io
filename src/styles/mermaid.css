/* Custom Mermaid chart styling to match site theme */
.mermaid {
  display: flex;
  justify-content: center;
  margin: 1.5rem 0;
  background-color: transparent;
}

.mermaid svg {
  max-width: 100%;
  height: auto;
  background-color: transparent;
  border-radius: 0.25rem;
  border: 1px solid #7b8994;
  padding: 1rem;
}

/* Force light backgrounds for all node types with good contrast */
.mermaid .node rect,
.mermaid .node circle,
.mermaid .node polygon,
.mermaid rect.basic,
.mermaid rect.label-container,
.mermaid .basic.label-container,
.mermaid rect[class*="label"],
.mermaid rect[style*="fill"] {
  fill: #ffffff !important;
  stroke: #007ee5 !important;
  stroke-width: 2px !important;
}

/* Base styling for all rect elements in mermaid */
.mermaid rect {
  fill: #ffffff !important;
  stroke: #007ee5 !important;
  stroke-width: 2px !important;
}

/* Differentiate node types with border colors while keeping light backgrounds */
.mermaid .node.default rect,
.mermaid .node.default circle,
.mermaid .node.default polygon {
  fill: #ffffff !important;
  stroke: #007ee5 !important;
}

.mermaid .node.primary rect,
.mermaid .node.primary circle,
.mermaid .node.primary polygon {
  fill: #007ee5 !important;
  stroke: #3399f0 !important;
}

.mermaid .node.secondary rect,
.mermaid .node.secondary circle,
.mermaid .node.secondary polygon {
  fill: #f8f9fa !important;
  stroke: #007ee5 !important;
}

.mermaid .node.tertiary rect,
.mermaid .node.tertiary circle,
.mermaid .node.tertiary polygon {
  fill: #e5e7ea !important;
  stroke: #3399f0 !important;
}

/* Ensure all text is dark for maximum contrast */
.mermaid .node .label,
.mermaid .node .nodeLabel,
.mermaid .nodeLabel,
.mermaid text {
  color: #3d464d !important;
  fill: #3d464d !important;
  font-weight: 500 !important;
}

/* Style edge labels with light backgrounds */
.mermaid .edgeLabel {
  background-color: #ffffff !important;
  color: #3d464d !important;
  fill: #3d464d !important;
  padding: 0.25rem 0.5rem !important;
  border-radius: 0.125rem !important;
  border: 1px solid #7b8994 !important;
}

/* Style arrows and lines */
.mermaid .edgePath path {
  stroke: #007ee5 !important;
  stroke-width: 2px !important;
}

.mermaid .arrowheadPath {
  fill: #007ee5 !important;
  stroke: #007ee5 !important;
}

/* Clean override for any remaining dark elements */
.mermaid rect[fill*="#000"],
.mermaid rect[fill*="#202"],
.mermaid rect[fill*="#282"],
.mermaid rect[fill*="#303"],
.mermaid rect[fill*="#353"] {
  fill: #ffffff !important;
  stroke: #007ee5 !important;
}

/* Ensure cluster/group backgrounds are light */
.mermaid .cluster rect {
  fill: rgba(255, 255, 255, 0.8) !important;
  stroke: #007ee5 !important;
  stroke-width: 1px !important;
}

/* Responsive design for mobile */
@media screen and (max-width: 640px) {
  .mermaid {
    margin: 1rem -1rem;
  }

  .mermaid svg {
    border-left: none;
    border-right: none;
    border-radius: 0;
    padding: 0.5rem;
  }
}
